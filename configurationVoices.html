<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Voice Profiles</title>
</head>
<body>
    <h1>Dynamic Voice Profiles: Friend, Teacher, Coach</h1>
    <p id="outputText"></p>

    <!-- Dropdown to filter by language -->
    <label for="languageSelect">Choose a language:</label>
    <select id="languageSelect">
        <option value="en-US">English (US)</option>
        <option value="en-GB">English (UK)</option>
        <option value="fr-FR">French</option>
        <option value="es-ES">Spanish</option>
        <option value="de-DE">German</option>
        <option value="ko-KR">Korean</option>
    </select><br><br>

    <!-- Dropdown to select a voice profile -->
    <label for="profileSelect">Choose a profile:</label>
    <select id="profileSelect">
        <option value="friend">Young Friend</option>
        <option value="teacher">Teacher</option>
        <option value="coach">Coach</option>
    </select><br><br>

    <button id="speakButton">Speak</button>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const synth = window.speechSynthesis;
            const languageSelect = document.getElementById('languageSelect');
            const profileSelect = document.getElementById('profileSelect');
            const speakButton = document.getElementById('speakButton');
            const outputText = document.getElementById('outputText');
            let voices = [];

            const inputString = "Hello! I am your AI assitant, please select the voice you want to hear !"; // Text to convert into speech
            outputText.textContent = `Text to Speak: "${inputString}"`;

            const loadVoices = () => {
                voices = synth.getVoices();
            };

            const selectVoiceByLanguage = (lang) => {
                // Find a voice matching the language
                const filteredVoices = voices.filter(voice => voice.lang === lang);
                return (
                    filteredVoices[0] || // Pick the first available voice in the selected language
                    voices.find(voice => voice.lang.startsWith(lang.split('-')[0])) || // Fallback to a broader language family
                    voices[0] // Fallback to the first available voice
                );
            };

            const getVoiceSettings = (profile) => {
                // Return settings for the selected voice profile
                switch (profile) {
                    case 'friend':
                        return { pitch: 1.2, rate: 1.0 }; // Youthful tone
                    case 'teacher':
                        return { pitch: 1.0, rate: 0.9 }; // Calm and deliberate tone
                    case 'coach':
                        return { pitch: 1.1, rate: 1.3 }; // Motivational and energetic tone
                    default:
                        return { pitch: 1.0, rate: 1.0 }; // Default settings
                }
            };

            const speakText = () => {
                if (!inputString) {
                    alert("No input text provided.");
                    return;
                }

                const selectedLanguage = languageSelect.value;
                const selectedProfile = profileSelect.value;
                const voice = selectVoiceByLanguage(selectedLanguage);

                if (!voice) {
                    alert(`No suitable voice found for language: ${selectedLanguage}`);
                    return;
                }

                const { pitch, rate } = getVoiceSettings(selectedProfile);

                const utterance = new SpeechSynthesisUtterance(inputString);
                utterance.voice = voice;
                utterance.pitch = pitch;
                utterance.rate = rate;

                // Speak the text
                synth.speak(utterance);
            };

            // Load voices on page load
            if (synth.onvoiceschanged !== undefined) {
                synth.onvoiceschanged = loadVoices;
            } else {
                loadVoices();
            }

            // Speak text on button click
            speakButton.addEventListener('click', speakText);
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Voice Profiles</title>
</head>
<body>
    <h1>Dynamic Voice Profiles: Friend, Teacher, Coach</h1>
    <p id="outputText"></p>

    <!-- Dropdown to filter by language --> 
    <label for="languageSelect">Choose a language:</label>
    <select id="languageSelect">
        <option value="en-US">English (US)</option>  
        <option value="en-GB">English (UK)</option>
        <option value="fr-FR">French</option>
        <option value="ko-KR">Korean</option>
    </select><br><br>

    <!-- Dropdown to select a voice profile -->
    <label for="profileSelect">Choose a profile:</label>
    <select id="profileSelect">
        <option value="friend">Young Friend</option>
        <option value="teacher">Teacher</option>
        <option value="coach">Coach</option>
    </select><br><br>

    <button id="speakButton">Speak</button>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const synth = window.speechSynthesis;
            const languageSelect = document.getElementById('languageSelect');
            const profileSelect = document.getElementById('profileSelect');
            const speakButton = document.getElementById('speakButton');
            const outputText = document.getElementById('outputText');
            let voices = [];

            const inputString = "안녕하세요, 저는 여러분의 AI 어시스턴트이며 친구라고 소개해드리고 싶습니다. ! "; // Text to convert into speech
            outputText.textContent = `Text to Speak: "${inputString}"`;

            const loadVoices = () => {
                voices = synth.getVoices();
            };

            const selectVoiceByProfile = (lang, profile) => {
                // Find voices matching the language
                const filteredVoices = voices.filter(voice => voice.lang === lang);

                if (!filteredVoices.length) return null; // No matching voices

                switch (profile) {
                    case 'friend': // Young Friend
                        return filteredVoices.find(voice => 
                            voice.name.toLowerCase().includes('young') || 
                            voice.name.toLowerCase().includes('female') ||
                            voice.name.toLowerCase().includes('male')
                        ) || filteredVoices[0];
                    case 'teacher': // Teacher
                        return filteredVoices.find(voice => 
                            voice.name.toLowerCase().includes('teacher') || 
                            voice.name.toLowerCase().includes('calm')
                        ) || filteredVoices[0];
                    case 'coach': // Coach
                        return filteredVoices.find(voice => 
                            voice.name.toLowerCase().includes('coach') || 
                            voice.name.toLowerCase().includes('energetic')
                        ) || filteredVoices[0];
                    default:
                        return filteredVoices[0];
                }
            };

            const getVoiceSettings = (profile) => {
                // Return settings for the selected voice profile
                switch (profile) {
                    case 'friend':
                        return { pitch: 1.3, rate: 1.5 }; // Youthful tone
                    case 'teacher':
                        return { pitch: 0.2, rate: 0.9 }; // Calm and deliberate tone
                    case 'coach':
                        return { pitch: 5.0, rate: 1.5 }; // Motivational and energetic tone
                    default:
                        return { pitch: 5.0, rate: 1.9 }; // Default settings
                }
            };

            const speakText = () => {
                if (!inputString) {
                    alert("No input text provided.");
                    return;
                }

                const selectedLanguage = languageSelect.value;
                const selectedProfile = profileSelect.value;
                const voice = selectVoiceByProfile(selectedLanguage, selectedProfile);

                if (!voice) {
                    alert(`No suitable voice found for language: ${selectedLanguage}`);
                    return;
                }

                const { pitch, rate } = getVoiceSettings(selectedProfile);

                const utterance = new SpeechSynthesisUtterance(inputString);
                utterance.voice = voice;
                utterance.pitch = pitch;
                utterance.rate = rate;

                // Speak the text
                synth.speak(utterance);
            };

            // Load voices on page load
            if (synth.onvoiceschanged !== undefined) {
                synth.onvoiceschanged = loadVoices;
            } else {
                loadVoices();
            }

            // Speak text on button click
            speakButton.addEventListener('click', speakText);
        });
    </script>
</body>
</html>
